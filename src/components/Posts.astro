---
import { getCollection } from "astro:content";
import Post from "./Post.astro";

const { count = -1, ignore_id = undefined } = Astro.props;

const posts = (await getCollection("blog"))
    .filter((post) => (ignore_id ? post.id !== ignore_id : post))
    .filter((post) => !post.data.isDraft)
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    .slice(0, count);
---

<div class="flex flex-col gap-2">
    {posts.map((post) => <Post post={post} />)}
    {count >= posts.length && <Post />}
</div>
